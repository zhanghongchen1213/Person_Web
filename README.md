# ä»é›¶å¼€å§‹æ­å»ºã€éƒ¨ç½²ä¸ªäººåšå®¢æŒ‡å—

[![GitHub](https://img.shields.io/badge/GitHub-Person__Web-blue?logo=github)](https://github.com/zhanghongchen1213/Person_Web)
[![åœ¨çº¿æ¼”ç¤º](https://img.shields.io/badge/åœ¨çº¿æ¼”ç¤º-zhcmqtt.top-green)](https://zhcmqtt.top)
[![License](https://img.shields.io/badge/license-MIT-orange)](LICENSE)
[![Docker](https://img.shields.io/badge/Docker-æ”¯æŒ-blue?logo=docker)](https://www.docker.com/)

## ğŸ“– å‰è¨€

### é¡¹ç›®ç®€ä»‹

Person_Web æ˜¯ä¸€ä¸ªåŸºäº **React 19 + Express + tRPC + MySQL** çš„ç°ä»£åŒ–å…¨æ ˆä¸ªäººåšå®¢ç³»ç»Ÿã€‚æœ¬é¡¹ç›®é‡‡ç”¨ Docker å®¹å™¨åŒ–éƒ¨ç½²ï¼Œæä¾›å®Œæ•´çš„ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼Œè®©ä½ å¯ä»¥å¿«é€Ÿåœ¨äº‘æœåŠ¡å™¨ä¸Šæ­å»ºå±äºè‡ªå·±çš„æŠ€æœ¯åšå®¢ã€‚

### ğŸ“ é¡¹ç›®ä¿¡æ¯

> **ğŸ“ å¼€æºåœ°å€**ï¼š[Person_Web](https://github.com/zhanghongchen1213/Person_Web)
> **ğŸ¯ åœ¨çº¿æ¼”ç¤º**ï¼š[zhcmqtt.top](https://zhcmqtt.top)
> **ğŸ“… æœ€åæ›´æ–°**ï¼š2026-01-20
> **ğŸš€ éƒ¨ç½²ç›®æ ‡**ï¼šå°†ä¸ªäººåšå®¢éƒ¨ç½²åˆ°äº‘æœåŠ¡å™¨ï¼ˆåä¸ºäº‘ã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰ï¼‰
> **â±ï¸ é¢„è®¡è€—æ—¶**ï¼šé¦–æ¬¡éƒ¨ç½²çº¦ 30-60 åˆ†é’Ÿï¼ˆå«æœåŠ¡å™¨é…ç½®ï¼‰

### ğŸ“¸ é¡¹ç›®æˆªå›¾

<div align="center">

**ä¸ªäººé¡µé¢**

[![ä¸ªäººé¡µé¢](https://i.imgs.ovh/2026/01/20/yzv3Eh.md.jpeg)](https://imgloc.com/image/yzv3Eh)

**é¦–é¡µå±•ç¤º**

[![é¦–é¡µ](https://i.imgs.ovh/2026/01/20/yzvi0e.md.png)](https://imgloc.com/image/yzvi0e)

**æ–‡ç« è¯¦æƒ…é¡µ**

[![æ–‡ç« è¯¦æƒ…](https://i.imgs.ovh/2026/01/20/yzF0za.md.png)](https://imgloc.com/image/yzF0za)

</div>

---

### ğŸ¯ é€‚åˆäººç¾¤

æœ¬æ•™ç¨‹é€‚åˆä»¥ä¸‹äººç¾¤ï¼š

- âœ… **æŠ€æœ¯çˆ±å¥½è€…**ï¼šæœ‰åŸºæœ¬çš„ç¼–ç¨‹åŸºç¡€å’Œ Linux å‘½ä»¤è¡Œä½¿ç”¨ç»éªŒ
- âœ… **å†…å®¹åˆ›ä½œè€…**ï¼šéœ€è¦ä¸€ä¸ªç¨³å®šã€ç¾è§‚çš„åšå®¢å¹³å°æ¥å‘å¸ƒæŠ€æœ¯æ–‡ç« 

### â­ é¡¹ç›®ç‰¹ç‚¹

#### ğŸš€ æŠ€æœ¯æ ˆå…ˆè¿›

- **å‰ç«¯**ï¼šReact 19 + TypeScript + Vite + TailwindCSS
- **åç«¯**ï¼šExpress + tRPC
- **æ•°æ®åº“**ï¼šMySQL 8.0 + Drizzle ORM
- **éƒ¨ç½²**ï¼šDocker + Docker Compose + Nginx + Let's Encrypt

#### ğŸ¨ åŠŸèƒ½å®Œæ•´

- âœ… Markdown ç¼–è¾‘å™¨ï¼Œæ”¯æŒä»£ç é«˜äº®å’Œå®æ—¶é¢„è§ˆ
- âœ… æ–‡ç« åˆ†ç±»ç®¡ç†ã€æ ‡ç­¾ç³»ç»Ÿ
- âœ… å“åº”å¼è®¾è®¡ï¼Œå®Œç¾é€‚é…ç§»åŠ¨ç«¯
- âœ… æš—é»‘æ¨¡å¼æ”¯æŒ
- âœ… GitHub OAuth è®¤è¯ï¼Œå®‰å…¨å¯é 
- âœ… å›¾ç‰‡ä¸Šä¼ å’Œç®¡ç†
- âœ… æ–‡æ¡£ç³»ç»Ÿï¼ˆæ”¯æŒæŠ€æœ¯æ–‡æ¡£ç¼–å†™ï¼‰
- âœ… SEO å‹å¥½

#### ğŸ› ï¸ éƒ¨ç½²ç®€å•

- âœ… **ä¸€é”®éƒ¨ç½²è„šæœ¬**ï¼šè‡ªåŠ¨åŒ–å®Œæˆæ‰€æœ‰é…ç½®
- âœ… **Docker å®¹å™¨åŒ–**ï¼šç¯å¢ƒéš”ç¦»ï¼Œé¿å…ä¾èµ–å†²çª
- âœ… **è¯¦ç»†æ–‡æ¡£**ï¼šæ¯ä¸€æ­¥éƒ½æœ‰æ¸…æ™°çš„è¯´æ˜å’Œæˆªå›¾
- âœ… **å›½å†…ä¼˜åŒ–**ï¼šæä¾›é•œåƒåŠ é€Ÿæ–¹æ¡ˆï¼Œè§£å†³ç½‘ç»œé—®é¢˜
- âœ… **HTTPS æ”¯æŒ**ï¼šè‡ªåŠ¨ç”³è¯·å’Œç»­æœŸ SSL è¯ä¹¦

#### ğŸ’° æˆæœ¬ä½å»‰

- äº‘æœåŠ¡å™¨ï¼š2æ ¸2G é…ç½®çº¦ 100-300 å…ƒ/å¹´
- åŸŸåï¼š.top/.xyz ç­‰åŸŸåçº¦ 10-50 å…ƒ/å¹´
- SSL è¯ä¹¦ï¼šLet's Encrypt å…è´¹è¯ä¹¦
- **æ€»æˆæœ¬**ï¼šçº¦ 110-350 å…ƒ/å¹´å³å¯æ‹¥æœ‰ä¸“ä¸šåšå®¢

### ğŸ“Š éƒ¨ç½²æ•ˆæœ

éƒ¨ç½²å®Œæˆåï¼Œä½ å°†æ‹¥æœ‰ï¼š

- ğŸŒ ä¸€ä¸ªå¯é€šè¿‡åŸŸåè®¿é—®çš„ä¸ªäººåšå®¢ç½‘ç«™
- ğŸ”’ HTTPS åŠ å¯†è¿æ¥ï¼Œç»¿è‰²å®‰å…¨é”æ ‡è¯†
- ğŸ“ åŠŸèƒ½å®Œæ•´çš„åå°ç®¡ç†ç³»ç»Ÿ
- ğŸ“± å®Œç¾é€‚é… PCã€å¹³æ¿ã€æ‰‹æœºçš„å“åº”å¼ç•Œé¢
- âš¡ å¿«é€Ÿçš„é¡µé¢åŠ è½½é€Ÿåº¦
- ğŸ” å®‰å…¨çš„ GitHub OAuth è®¤è¯

### éƒ¨ç½²æ¶æ„ç®€ä»‹

```mermaid
graph TD
    A[ç”¨æˆ·æµè§ˆå™¨] --> B[åŸŸå zhcmqtt.top]
    B --> C[Nginx åå‘ä»£ç† + HTTPS]
    C --> D[Docker å®¹å™¨]
    D --> E[åº”ç”¨å®¹å™¨<br/>React + Express + tRPC]
    D --> F[æ•°æ®åº“å®¹å™¨<br/>MySQL 8.0]
```

---

## ğŸ“‹ ç›®å½•

- [ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡äº‘æœåŠ¡å™¨](#ç¬¬ä¸€æ­¥å‡†å¤‡äº‘æœåŠ¡å™¨)
- [ç¬¬äºŒæ­¥ï¼šä¸€é”®é…ç½®æœåŠ¡å™¨ç¯å¢ƒ](#ç¬¬äºŒæ­¥ä¸€é”®é…ç½®æœåŠ¡å™¨ç¯å¢ƒ)
- [ç¬¬ä¸‰æ­¥ï¼šé…ç½®äº‘æœåŠ¡å•†å®‰å…¨ç»„](#ç¬¬ä¸‰æ­¥é…ç½®äº‘æœåŠ¡å•†å®‰å…¨ç»„)
- [ç¬¬å››æ­¥ï¼šä¸Šä¼ é¡¹ç›®ä»£ç ](#ç¬¬å››æ­¥ä¸Šä¼ é¡¹ç›®ä»£ç )
- [ç¬¬äº”æ­¥ï¼šé…ç½®ä¸ªäººä¿¡æ¯ï¼ˆé‡è¦ï¼‰](#ç¬¬äº”æ­¥é…ç½®ä¸ªäººä¿¡æ¯é‡è¦)
- [ç¬¬å…­æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡](#ç¬¬å…­æ­¥é…ç½®ç¯å¢ƒå˜é‡)
- [ç¬¬ä¸ƒæ­¥ï¼šä¸€é”®éƒ¨ç½²åº”ç”¨](#ç¬¬ä¸ƒæ­¥ä¸€é”®éƒ¨ç½²åº”ç”¨)
- [ç¬¬å…«æ­¥ï¼šè®¿é—®ä½ çš„åšå®¢](#ç¬¬å…«æ­¥è®¿é—®ä½ çš„åšå®¢)
- [ç¬¬ä¹æ­¥ï¼šé…ç½®åŸŸåå’Œ HTTPSï¼ˆå¯é€‰ï¼‰](#ç¬¬ä¹æ­¥é…ç½®åŸŸåå’Œ-httpså¯é€‰)
- [å¸¸è§é—®é¢˜è§£ç­”](#å¸¸è§é—®é¢˜è§£ç­”)
- [æ—¥å¸¸ç»´æŠ¤æŒ‡å—](#æ—¥å¸¸ç»´æŠ¤æŒ‡å—)

---

## ä¸€ã€å‡†å¤‡äº‘æœåŠ¡å™¨

### 1.1 è´­ä¹°äº‘æœåŠ¡å™¨

ä½ å¯ä»¥é€‰æ‹©ä»¥ä¸‹ä»»ä¸€äº‘æœåŠ¡å•†ï¼š

- **åä¸ºäº‘**ï¼šhttps://www.huaweicloud.com/
- **é˜¿é‡Œäº‘**ï¼šhttps://www.aliyun.com/
- **è…¾è®¯äº‘**ï¼šhttps://cloud.tencent.com/

**æ¨èé…ç½®**ï¼š

| é…ç½®é¡¹   | æœ€ä½è¦æ±‚         | è¯´æ˜                   |
| -------- | ---------------- | ---------------------- |
| CPU      | 2 æ ¸å¿ƒ           | ä¿è¯åº”ç”¨æµç•…è¿è¡Œ       |
| å†…å­˜     | 2GB              | è¶³å¤Ÿè¿è¡Œ Docker å®¹å™¨   |
| ç£ç›˜     | 20GB             | å­˜å‚¨ç³»ç»Ÿã€åº”ç”¨å’Œæ•°æ®åº“ |
| æ“ä½œç³»ç»Ÿ | Ubuntu 22.04 LTS | æ¨èä½¿ç”¨ Ubuntu        |
| å¸¦å®½     | 1Mbps            | ä¸ªäººåšå®¢è¶³å¤Ÿä½¿ç”¨       |

ğŸ’¡ **å°è´´å£«**ï¼šæ–°ç”¨æˆ·é€šå¸¸æœ‰ä¼˜æƒ æ´»åŠ¨ï¼Œ2æ ¸2Gé…ç½®ä¸€å¹´å¤§çº¦ 100-300 å…ƒã€‚

---

### 1.2 è´­ä¹°åŸŸåï¼ˆå¯é€‰ä½†æ¨èï¼‰

å¦‚æœä½ æƒ³ä½¿ç”¨è‡ªå·±çš„åŸŸåï¼ˆå¦‚ `myblog.com`ï¼‰ï¼Œéœ€è¦ï¼š

1. åœ¨åŸŸåæ³¨å†Œå•†è´­ä¹°åŸŸåï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€GoDaddyï¼‰
2. å°†åŸŸåè§£æåˆ°ä½ çš„æœåŠ¡å™¨ IP åœ°å€

**åŸŸåè§£ææ­¥éª¤**ï¼š

```
1. ç™»å½•åŸŸåç®¡ç†æ§åˆ¶å°
2. æ‰¾åˆ° DNS è§£æè®¾ç½®
3. æ·»åŠ  A è®°å½•ï¼š
   - ä¸»æœºè®°å½•ï¼š@ (ä»£è¡¨æ ¹åŸŸå)
   - è®°å½•ç±»å‹ï¼šA
   - è®°å½•å€¼ï¼šä½ çš„æœåŠ¡å™¨å…¬ç½‘ IP
4. æ·»åŠ  A è®°å½•ï¼š
   - ä¸»æœºè®°å½•ï¼šwww
   - è®°å½•ç±»å‹ï¼šA
   - è®°å½•å€¼ï¼šä½ çš„æœåŠ¡å™¨å…¬ç½‘ IP
```

ğŸ’¡ **å°è´´å£«**ï¼šå¦‚æœæš‚æ—¶æ²¡æœ‰åŸŸåï¼Œå¯ä»¥å…ˆä½¿ç”¨æœåŠ¡å™¨ IP åœ°å€è®¿é—®ï¼Œåç»­å†é…ç½®åŸŸåã€‚

---

### 1.3 è¿æ¥åˆ°æœåŠ¡å™¨

ä½¿ç”¨ SSH è¿æ¥åˆ°ä½ çš„æœåŠ¡å™¨ï¼š

**Windows ç”¨æˆ·**ï¼š

```bash
# ä½¿ç”¨ PowerShell æˆ– Windows Terminal
ssh root@ä½ çš„æœåŠ¡å™¨IP
# ä¾‹å¦‚ï¼šssh root@123.45.67.89
```

**Mac/Linux ç”¨æˆ·**ï¼š

```bash
# ä½¿ç”¨ç»ˆç«¯
ssh root@ä½ çš„æœåŠ¡å™¨IP
```

é¦–æ¬¡è¿æ¥ä¼šæç¤ºæ˜¯å¦ä¿¡ä»»æœåŠ¡å™¨ï¼Œè¾“å…¥ `yes` å¹¶å›è½¦ï¼Œç„¶åè¾“å…¥æœåŠ¡å™¨å¯†ç ã€‚

âœ… **æˆåŠŸæ ‡å¿—**ï¼šçœ‹åˆ°ç±»ä¼¼ `root@hostname:~#` çš„å‘½ä»¤æç¤ºç¬¦ã€‚

---

## äºŒã€ä¸€é”®é…ç½®æœåŠ¡å™¨ç¯å¢ƒ

é¡¹ç›®æä¾›äº†ä¸€é”®é…ç½®è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨å®Œæˆ Dockerã€Nginx å’Œé˜²ç«å¢™çš„å®‰è£…é…ç½®ã€‚

### 2.1 åˆ›å»ºé¡¹ç›®ç›®å½•

```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /opt/Person_Web

# è®¾ç½®ç›®å½•æ‰€æœ‰è€…ä¸ºå½“å‰ç”¨æˆ·
sudo chown -R $USER:$USER /opt/Person_Web

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/Person_Web
```

### 2.2 ä¸Šä¼ é¡¹ç›®åˆ°æœåŠ¡å™¨

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ GitHub é•œåƒåŠ é€Ÿï¼ˆæ¨èï¼Œé€‚ç”¨äºå›½å†…æœåŠ¡å™¨ï¼‰

å¦‚æœä½ çš„äº‘æœåŠ¡å™¨æ— æ³•ç›´æ¥è®¿é—® GitHubï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é•œåƒåŠ é€ŸæœåŠ¡ï¼š

```bash
# å®‰è£… Gitï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
sudo apt install -y git

# æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ ghproxy.com é•œåƒï¼ˆæ¨èï¼‰
git clone https://ghproxy.com/https://github.com/zhanghongchen1213/Person_Web /opt/Person_Web

# æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ gitclone.com é•œåƒ
git clone https://gitclone.com/github.com/zhanghongchen1213/Person_Web /opt/Person_Web

# æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ fastgit é•œåƒ
git clone https://hub.fastgit.xyz/zhanghongchen1213/Person_Web /opt/Person_Web

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/Person_Web
```

ğŸ’¡ **å°è´´å£«**ï¼š

- é•œåƒæœåŠ¡å¯èƒ½ä¼šæœ‰å»¶è¿Ÿï¼Œå»ºè®®ä¼˜å…ˆå°è¯• ghproxy.com
- å¦‚æœä¸€ä¸ªé•œåƒå¤±è´¥ï¼Œå¯ä»¥å°è¯•å…¶ä»–é•œåƒ
- é•œåƒæœåŠ¡ä»…ç”¨äºå…‹éš†ï¼Œåç»­ git æ“ä½œä¼šè‡ªåŠ¨ä½¿ç”¨åŸå§‹ä»“åº“åœ°å€

#### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨ä¸Šä¼ ä»£ç ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰

å¦‚æœ Git å…‹éš†å§‹ç»ˆå¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸Šä¼ ä»£ç ï¼š

1. **åœ¨æœ¬åœ°ä¸‹è½½é¡¹ç›®**ï¼š
   - è®¿é—® https://github.com/zhanghongchen1213/Person_Web
   - ç‚¹å‡» "Code" â†’ "Download ZIP"
   - è§£å‹åˆ°æœ¬åœ°

2. **ä¸Šä¼ åˆ°æœåŠ¡å™¨**å¹¶è§£å‹

   ```bash
   unzip Person_Web-main.zip
   rm -rf Person_Web-main.zip
   cd Person_Web-main
   ```

### 2.3 é…ç½®ç½‘ç»œç¯å¢ƒï¼ˆé‡è¦ï¼Œé€‚ç”¨äºå›½å†…æœåŠ¡å™¨ï¼‰

âš ï¸ **é‡è¦æç¤º**ï¼šå¦‚æœä½ çš„äº‘æœåŠ¡å™¨åœ¨å›½å†…ï¼Œæˆ–è€…æ— æ³•æ­£å¸¸è®¿é—® GitHubã€Docker Hub ç­‰å›½å¤–èµ„æºï¼Œ**å¿…é¡»å…ˆæ‰§è¡Œæ­¤æ­¥éª¤**é…ç½®é•œåƒæºï¼Œå¦åˆ™åç»­å®‰è£…å¯èƒ½ä¼šå¤±è´¥æˆ–éå¸¸ç¼“æ…¢ã€‚

é¡¹ç›®æä¾›äº†ç½‘ç»œç¯å¢ƒé…ç½®è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨é…ç½®å›½å†…é•œåƒæºï¼Œè§£å†³ç½‘ç»œè®¿é—®é—®é¢˜ã€‚

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/Person_Web

# èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy/scripts/*

# æ‰§è¡Œç½‘ç»œç¯å¢ƒé…ç½®è„šæœ¬
sudo bash deploy/scripts/setup-network.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹é…ç½®ï¼š

1. âœ… **APT è½¯ä»¶æº** - åˆ‡æ¢åˆ°é˜¿é‡Œäº‘é•œåƒï¼ŒåŠ é€Ÿè½¯ä»¶åŒ…ä¸‹è½½
2. âœ… **Docker é•œåƒæº** - é…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨ï¼ˆè…¾è®¯äº‘ã€DaoCloudã€DockerProxyï¼‰
3. âœ… **Git é…ç½®ä¼˜åŒ–** - ç¦ç”¨ HTTP/2ï¼Œå¢åŠ ç¼“å†²åŒºï¼Œè§£å†³å…‹éš†å¤±è´¥é—®é¢˜
4. âœ… **npm é•œåƒæº** - é…ç½®æ·˜å®é•œåƒï¼ˆå¦‚å·²å®‰è£… npmï¼‰

âœ… **é¢„æœŸè¾“å‡º**ï¼š

[![yV63jQ.md.png](https://i.imgs.ovh/2026/01/19/yV63jQ.md.png)](https://imgloc.com/image/yV63jQ)

ğŸ’¡ **é…ç½®æ•ˆæœ**ï¼š

- âœ… APT è½¯ä»¶åŒ…ä¸‹è½½é€Ÿåº¦æå‡ 10-50 å€
- âœ… Docker é•œåƒæ‹‰å–é€Ÿåº¦æå‡ 10-100 å€
- âœ… Git å…‹éš†æˆåŠŸç‡æ¥è¿‘ 100%
- âœ… npm åŒ…å®‰è£…é€Ÿåº¦æå‡ 5-20 å€

### 2.4 æ‰§è¡ŒæœåŠ¡å™¨ç¯å¢ƒé…ç½®è„šæœ¬

```bash
# æ‰§è¡ŒæœåŠ¡å™¨ç¯å¢ƒé…ç½®è„šæœ¬
sudo bash deploy/scripts/setup-server.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š

1. âœ… **æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…** - æ›´æ–° apt è½¯ä»¶åŒ…åˆ—è¡¨
2. âœ… **å®‰è£… Docker** - ä½¿ç”¨å®˜æ–¹è„šæœ¬å®‰è£… Docker å’Œ Docker Compose
3. âœ… **é…ç½® Docker æƒé™** - å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„
4. âœ… **å®‰è£… Nginx** - å®‰è£…å¹¶å¯åŠ¨ Nginx æœåŠ¡
5. âœ… **é…ç½®é˜²ç«å¢™** - å¼€æ”¾å¿…è¦ç«¯å£ï¼ˆ22, 80, 443ï¼‰
6. âœ… **éªŒè¯å®‰è£…** - æµ‹è¯•æ‰€æœ‰æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

### 2.5 é¢„æœŸè¾“å‡º

[![yV8yHp.md.png](https://i.imgs.ovh/2026/01/19/yV8yHp.md.png)](https://imgloc.com/image/yV8yHp)

---

## ä¸‰ã€é…ç½®äº‘æœåŠ¡å•†å®‰å…¨ç»„

é™¤äº†æœåŠ¡å™¨é˜²ç«å¢™ï¼Œè¿˜éœ€è¦åœ¨äº‘æœåŠ¡å•†æ§åˆ¶å°é…ç½®å®‰å…¨ç»„ï¼š

1. ç™»å½•äº‘æœåŠ¡å•†æ§åˆ¶å°
2. æ‰¾åˆ°ä½ çš„æœåŠ¡å™¨å®ä¾‹
3. è¿›å…¥"å®‰å…¨ç»„"æˆ–"é˜²ç«å¢™"è®¾ç½®
4. æ·»åŠ å…¥ç«™è§„åˆ™ï¼š
   - ç«¯å£ 22ï¼ˆSSHï¼‰
   - ç«¯å£ 80ï¼ˆHTTPï¼‰
   - ç«¯å£ 443ï¼ˆHTTPSï¼‰

ğŸ’¡ **å°è´´å£«**ï¼šä¸åŒäº‘æœåŠ¡å•†çš„ç•Œé¢ç•¥æœ‰ä¸åŒï¼Œä½†æ“ä½œé€»è¾‘ç›¸åŒã€‚

---

## å››ã€é…ç½®ä¸ªäººä¿¡æ¯ï¼ˆé‡è¦ï¼‰

âš ï¸ **é‡è¦æç¤º**ï¼šåœ¨éƒ¨ç½²ä¹‹å‰ï¼Œä½ éœ€è¦å°†é¡¹ç›®ä¸­çš„ç¤ºä¾‹ä¸ªäººä¿¡æ¯æ›¿æ¢ä¸ºä½ è‡ªå·±çš„ä¿¡æ¯ã€‚

### 4.1 ä½¿ç”¨ä¸€é”®é…ç½®è„šæœ¬ï¼ˆæ¨èï¼‰

é¡¹ç›®æä¾›äº†äº¤äº’å¼ä¸ªäººä¿¡æ¯é…ç½®è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨æ›¿æ¢æ‰€æœ‰ç›¸å…³æ–‡ä»¶ä¸­çš„ä¸ªäººä¿¡æ¯ã€‚

```bash
cd Person_Web-main
bash deploy/scripts/setup-personal-info.sh
```

è„šæœ¬ä¼šæç¤ºä½ è¾“å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **GitHub ç”¨æˆ·å**ï¼šä½ çš„ GitHub ç”¨æˆ·åï¼ˆç”¨äºå¤´åƒå’Œä¸ªäººä¸»é¡µé“¾æ¥ï¼‰
2. **åŸŸå**ï¼šä½ çš„åšå®¢åŸŸåï¼ˆå¦‚ `myblog.com`ï¼‰
3. **é‚®ç®±åœ°å€**ï¼šä½ çš„è”ç³»é‚®ç®±
4. **å¾®ä¿¡å·**ï¼šä½ çš„å¾®ä¿¡å·ï¼ˆå¯é€‰ï¼‰

### 4.2 æ‰‹åŠ¨æ›¿æ¢ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰

å¦‚æœä½ ä¸æƒ³ä½¿ç”¨è„šæœ¬ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æ›¿æ¢ä»¥ä¸‹æ–‡ä»¶ä¸­çš„ä¸ªäººä¿¡æ¯ï¼š

**éœ€è¦æ›¿æ¢çš„æ–‡ä»¶ï¼š**

- `client/src/pages/About.tsx` - å…³äºé¡µé¢
- `client/src/components/Footer.tsx` - é¡µè„šç»„ä»¶
- `README.md` - é¡¹ç›®æ–‡æ¡£

**éœ€è¦æ›¿æ¢çš„ä¿¡æ¯ï¼š**

- `zhanghongchen1213` â†’ ä½ çš„ GitHub ç”¨æˆ·å
- `zhcmqtt.top` â†’ ä½ çš„åŸŸå
- `admin@zhcmqtt.top` â†’ ä½ çš„é‚®ç®±
- `zhang_hongchen` â†’ ä½ çš„å¾®ä¿¡å·

ğŸ’¡ **å°è´´å£«**ï¼šä½¿ç”¨è„šæœ¬æ›¿æ¢æ›´å®‰å…¨ï¼Œå¯ä»¥é¿å…é—æ¼ã€‚

---

## äº”ã€é…ç½®ç¯å¢ƒå˜é‡

ç¯å¢ƒå˜é‡åŒ…å«äº†åº”ç”¨è¿è¡Œæ‰€éœ€çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚æ•°æ®åº“å¯†ç ã€JWT å¯†é’¥ç­‰ã€‚

### 5.1 ä½¿ç”¨ä¸€é”®é…ç½®è„šæœ¬ï¼ˆæ¨èï¼‰

é¡¹ç›®æä¾›äº†äº¤äº’å¼ç¯å¢ƒå˜é‡é…ç½®è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨ç”Ÿæˆå¼ºå¯†ç å¹¶åˆ›å»ºé…ç½®æ–‡ä»¶ã€‚

âš ï¸ **é‡è¦æç¤º**ï¼šä¸ºäº†ç¡®ä¿åšå®¢å®‰å…¨ï¼Œ**å¼ºçƒˆæ¨èä½¿ç”¨ GitHub OAuth è®¤è¯**ï¼Œè¿™æ ·åªæœ‰ä½ çš„ GitHub è´¦å·èƒ½å¤Ÿç™»å½•ç®¡ç†å‘˜åå°ã€‚

#### æ­¥éª¤ 1ï¼šåˆ›å»º GitHub OAuth åº”ç”¨ï¼ˆæ¨èï¼‰

åœ¨è¿è¡Œé…ç½®è„šæœ¬ä¹‹å‰ï¼Œå»ºè®®å…ˆåˆ›å»º GitHub OAuth åº”ç”¨ä»¥è·å–å¿…è¦çš„è®¤è¯å‚æ•°ã€‚

1. è®¿é—® [GitHub Developer Settings](https://github.com/settings/developers)
2. ç‚¹å‡» **"New OAuth App"** åˆ›å»ºæ–°åº”ç”¨
3. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - **Application name**: ä½ çš„åšå®¢åç§°ï¼ˆå¦‚ "My Personal Blog"ï¼‰
   - **Homepage URL**: `https://ä½ çš„åŸŸå`
   - **Authorization callback URL**: `https://ä½ çš„åŸŸå/api/auth/github/callback`
4. ç‚¹å‡» **"Register application"**
5. è®°å½•ä¸‹ **Client ID** å’Œ **Client Secret**ï¼ˆç¨åé…ç½®æ—¶éœ€è¦ï¼‰
6. è·å–ä½ çš„ GitHub ç”¨æˆ· IDï¼š
   - è®¿é—® `https://api.github.com/users/ä½ çš„GitHubç”¨æˆ·å`
   - è®°å½•è¿”å›çš„ JSON ä¸­çš„ `id` å­—æ®µå€¼

ğŸ’¡ **ç¤ºä¾‹**ï¼šå¦‚æœä½ çš„ GitHub ç”¨æˆ·åæ˜¯ `zhangsan`ï¼Œè®¿é—® `https://api.github.com/users/zhangsan`ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼ï¼š

```json
{
  "id": 12345678,
  "login": "zhangsan",
  ...
}
```

è®°å½•ä¸‹ `id: 12345678`ï¼Œç¨åé…ç½®æ—¶éœ€è¦å¡«å†™ `github:12345678`ã€‚

#### æ­¥éª¤ 2ï¼šè¿è¡Œé…ç½®è„šæœ¬

```bash
# æ‰§è¡Œç¯å¢ƒå˜é‡é…ç½®è„šæœ¬
sudo bash deploy/scripts/setup-env.sh
```

è„šæœ¬ä¼šäº¤äº’å¼åœ°è¯¢é—®ä½ ä»¥ä¸‹é…ç½®ï¼š

1. **MySQL root å¯†ç **ï¼ˆç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ32ä½å¼ºå¯†ç ï¼‰
2. **JWT å¯†é’¥**ï¼ˆç•™ç©ºè‡ªåŠ¨ç”Ÿæˆ32ä½å¼ºå¯†ç ï¼‰
3. **GitHub OAuth é…ç½®**ï¼ˆå¿…é¡»é…ç½®ï¼Œè¾“å…¥ä¸Šä¸€æ­¥è·å–çš„å‚æ•°ï¼‰ï¼š
   - GitHub Client ID
   - GitHub Client Secret
   - GitHub Callback URL
4. **ç®¡ç†å‘˜ GitHub ç”¨æˆ· ID**ï¼ˆæ ¼å¼ä¸º `github:ä½ çš„GitHubç”¨æˆ·ID`ï¼‰

é…ç½®å®Œæˆåï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ç”Ÿæˆ `.env.production` æ–‡ä»¶ã€‚

âœ… **é¢„æœŸè¾“å‡º**ï¼ˆé…ç½® GitHub OAuthï¼‰ï¼š

[![yV8aLO.md.png](https://i.imgs.ovh/2026/01/19/yV8aLO.md.png)](https://imgloc.com/image/yV8aLO)

ğŸ”’ **å®‰å…¨ä¼˜åŠ¿**ï¼š

- âœ… åªæœ‰ä½ çš„ GitHub è´¦å·èƒ½å¤Ÿç™»å½•ç®¡ç†å‘˜åå°
- âœ… ä½¿ç”¨ GitHub å®˜æ–¹ OAuth è®¤è¯ï¼Œå®‰å…¨å¯é 
- âœ… æ— éœ€è®°å¿†å¤æ‚çš„ç™»å½•é“¾æ¥
- âœ… æ”¯æŒåç»­æ·»åŠ å…¶ä»– GitHub ç”¨æˆ·ä¸ºç®¡ç†å‘˜

---

## å…­ã€ä¸€é”®éƒ¨ç½²åº”ç”¨

é¡¹ç›®æä¾›äº†ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼Œä¼šè‡ªåŠ¨å®Œæˆæ‰€æœ‰éƒ¨ç½²æ­¥éª¤ã€‚

### 6.1 æ‰§è¡Œä¸€é”®éƒ¨ç½²

```bash
# æ‰§è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
sudo bash deploy/scripts/deploy.sh
```

â±ï¸ **é¢„è®¡è€—æ—¶**ï¼š10-20 åˆ†é’Ÿï¼ˆé¦–æ¬¡éƒ¨ç½²éœ€è¦ä¸‹è½½ Docker é•œåƒï¼Œä¼šæ¯”è¾ƒæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼‰

[![ybCXcY.md.png](https://i.imgs.ovh/2026/01/19/ybCXcY.md.png)](https://imgloc.com/image/ybCXcY)

---

### 5.2 éƒ¨ç½²è¿‡ç¨‹è¯´æ˜

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹ 8 ä¸ªæ­¥éª¤ï¼š

1. âœ… **æ£€æŸ¥ Docker ç¯å¢ƒ** - ç¡®ä¿ Docker å’Œ Docker Compose å·²å®‰è£…
2. âœ… **æ£€æŸ¥é…ç½®æ–‡ä»¶** - éªŒè¯ `.env.production` æ–‡ä»¶å­˜åœ¨ä¸”é…ç½®æ­£ç¡®
3. âœ… **åœæ­¢æ—§å®¹å™¨** - å¦‚æœæœ‰æ—§ç‰ˆæœ¬è¿è¡Œï¼Œå…ˆåœæ­¢å¹¶åˆ é™¤
4. âœ… **æ„å»ºæ–°é•œåƒ** - æ„å»ºåŒ…å«æœ€æ–°ä»£ç çš„ Docker é•œåƒ
5. âœ… **å¯åŠ¨æ–°å®¹å™¨** - å¯åŠ¨åº”ç”¨å®¹å™¨å’Œæ•°æ®åº“å®¹å™¨
6. âœ… **æ‰§è¡Œæ•°æ®åº“è¿ç§»** - åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„
7. âœ… **å¥åº·æ£€æŸ¥** - ç­‰å¾…åº”ç”¨å¯åŠ¨å¹¶éªŒè¯è¿è¡ŒçŠ¶æ€
8. âœ… **è¾“å‡ºéƒ¨ç½²ç»“æœ** - æ˜¾ç¤ºéƒ¨ç½²æˆåŠŸä¿¡æ¯å’Œå¸¸ç”¨å‘½ä»¤

### 5.3 é¢„æœŸè¾“å‡º

[![yb11kx.md.png](https://i.imgs.ovh/2026/01/20/yb11kx.md.png)](https://imgloc.com/image/yb11kx)

### 5.4 éªŒè¯éƒ¨ç½²

#### æ£€æŸ¥å®¹å™¨çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çŠ¶æ€
docker compose ps
```

âœ… **é¢„æœŸè¾“å‡º**ï¼š

```
NAME                IMAGE               STATUS              PORTS
person_web_app      person-web:latest   Up 2 minutes (healthy)   0.0.0.0:3000->3000/tcp
person_web_mysql    mysql:8.0           Up 2 minutes (healthy)   0.0.0.0:3306->3306/tcp
```

ä¸¤ä¸ªå®¹å™¨çš„çŠ¶æ€éƒ½åº”è¯¥æ˜¯ `Up` ä¸”æ˜¾ç¤º `(healthy)`ã€‚

#### æŸ¥çœ‹åº”ç”¨æ—¥å¿—

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—ï¼ˆå®æ—¶ï¼‰
docker compose logs -f app
```

âœ… **é¢„æœŸè¾“å‡º**ï¼šåº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„æ—¥å¿—ï¼š

```
[INFO] Server running on http://localhost:3000
[INFO] Database connected successfully
```

æŒ‰ `Ctrl + C` é€€å‡ºæ—¥å¿—æŸ¥çœ‹ã€‚

#### æµ‹è¯•åº”ç”¨è®¿é—®

```bash
# æµ‹è¯•æœ¬åœ°è®¿é—®
curl http://localhost:3000
```

âœ… **é¢„æœŸè¾“å‡º**ï¼šè¿”å› HTML å†…å®¹ï¼ˆåšå®¢é¦–é¡µï¼‰

---

## ä¸ƒã€é…ç½®åŸŸåå’Œ HTTPS

âš ï¸ **æœ¬æ­¥éª¤ä¸ºå¯é€‰é¡¹**ï¼šå¦‚æœä½ æ²¡æœ‰åŸŸåæˆ–æš‚æ—¶ä¸éœ€è¦ HTTPSï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥éª¤ã€‚ä½¿ç”¨ IP åœ°å€è®¿é—®åšå®¢å·²ç»å®Œå…¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼Œå¼ºçƒˆå»ºè®®é…ç½® HTTPS è¯ä¹¦ï¼Œè®©ä½ çš„åšå®¢æ›´å®‰å…¨ã€æ›´ä¸“ä¸šã€‚

### 6.1 å‰ç½®å‡†å¤‡

åœ¨å¼€å§‹é…ç½®ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. âœ… ä½ å·²ç»è´­ä¹°äº†åŸŸåï¼ˆå¦‚ `myblog.com`ï¼‰
2. âœ… åŸŸåå·²ç»è§£æåˆ°ä½ çš„æœåŠ¡å™¨ IP åœ°å€
3. âœ… åšå®¢å·²ç»å¯ä»¥é€šè¿‡ IP åœ°å€æ­£å¸¸è®¿é—®

### 6.2 é…ç½®åŸŸåï¼ˆä¸€é”®è„šæœ¬ï¼‰

é¡¹ç›®æä¾›äº†åŸŸåé…ç½®è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨æ›¿æ¢æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸­çš„åŸŸåã€‚

```bash
# æ‰§è¡ŒåŸŸåé…ç½®è„šæœ¬
sudo bash deploy/scripts/setup-domain.sh ä½ çš„åŸŸå
# ä¾‹å¦‚ï¼šbash deploy/scripts/setup-domain.sh zhcmqtt.top
```

â±ï¸ **é¢„è®¡è€—æ—¶**ï¼š10 ç§’

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š

1. âœ… å¤‡ä»½åŸå§‹é…ç½®æ–‡ä»¶
2. âœ… æ›¿æ¢ SSL è¯ä¹¦ç”³è¯·è„šæœ¬ä¸­çš„åŸŸå
3. âœ… åˆ›å»ºæ–°çš„ Nginx é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨ä½ çš„åŸŸåï¼‰
4. âœ… è¾“å‡ºåç»­æ“ä½œæ­¥éª¤

### 6.3 å‡†å¤‡ Let's Encrypt éªŒè¯ç›®å½•

åœ¨éƒ¨ç½² Nginx é…ç½®å‰ï¼Œéœ€è¦å…ˆåˆ›å»º SSL è¯ä¹¦éªŒè¯ç›®å½•ï¼š

```bash
# åˆ›å»º Let's Encrypt éªŒè¯ç›®å½•
sudo mkdir -p /var/www/html/.well-known/acme-challenge

# è®¾ç½®æ­£ç¡®çš„æƒé™
sudo chmod -R 755 /var/www/html/.well-known
```

### 6.4 éƒ¨ç½² HTTP Nginx é…ç½®ï¼ˆç”¨äºè¯ä¹¦ç”³è¯·ï¼‰

âš ï¸ **é‡è¦**ï¼šé¦–æ¬¡é…ç½®æ—¶ï¼Œéœ€è¦å…ˆéƒ¨ç½² HTTP é…ç½®ï¼Œç”³è¯·è¯ä¹¦æˆåŠŸåå†åˆ‡æ¢åˆ° HTTPS é…ç½®ã€‚

```bash
# åˆ é™¤æ—§é…ç½®ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
sudo rm -f /etc/nginx/sites-enabled/default
sudo rm -f /etc/nginx/sites-enabled/ä½ çš„åŸŸå.conf
# ä¾‹å¦‚ï¼šsudo rm -f /etc/nginx/sites-enabled/zhcmqtt.top.conf

# å¤åˆ¶ HTTP é…ç½®æ–‡ä»¶åˆ°ç³»ç»Ÿç›®å½•
sudo cp deploy/nginx/ä½ çš„åŸŸå.conf /etc/nginx/sites-available/
# ä¾‹å¦‚ï¼šsudo cp deploy/nginx/zhcmqtt.top.conf /etc/nginx/sites-available/

# åˆ›å»ºè½¯é“¾æ¥å¯ç”¨é…ç½®
sudo ln -s /etc/nginx/sites-available/ä½ çš„åŸŸå.conf /etc/nginx/sites-enabled/
# ä¾‹å¦‚ï¼šsudo ln -s /etc/nginx/sites-available/zhcmqtt.top.conf /etc/nginx/sites-enabled/

# æµ‹è¯• Nginx é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

âœ… **é¢„æœŸè¾“å‡º**ï¼š`syntax is ok` å’Œ `test is successful`

**éªŒè¯ HTTP è®¿é—®**ï¼š

```bash
# æµ‹è¯•åŸŸåè®¿é—®
curl -I http://ä½ çš„åŸŸå
# ä¾‹å¦‚ï¼šcurl -I http://zhcmqtt.top

# åº”è¯¥è¿”å› HTTP/1.1 200 æˆ–çœ‹åˆ° HTML å†…å®¹
```

### 6.5 ç”³è¯· SSL è¯ä¹¦ï¼ˆä¸€é”®è„šæœ¬ï¼‰

âš ï¸ **å‰ææ¡ä»¶**ï¼šç¡®ä¿ HTTP è®¿é—®æ­£å¸¸åå†æ‰§è¡Œæ­¤æ­¥éª¤ã€‚

é¡¹ç›®æä¾›äº† SSL è¯ä¹¦ç”³è¯·è„šæœ¬ï¼Œå¯ä»¥è‡ªåŠ¨å®Œæˆæ‰€æœ‰æ­¥éª¤ã€‚

```bash
# æ‰§è¡Œ SSL è¯ä¹¦ç”³è¯·è„šæœ¬
sudo bash deploy/scripts/setup-ssl.sh ä½ çš„åŸŸå ä½ çš„é‚®ç®±

# ä¾‹å¦‚ï¼šsudo bash deploy/scripts/setup-ssl.sh zhcmqtt.top admin@zhcmqtt.top
```

â±ï¸ **é¢„è®¡è€—æ—¶**ï¼š2-3 åˆ†é’Ÿ

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š

1. âœ… æ£€æŸ¥å¹¶å®‰è£… Certbot
2. âœ… ç”³è¯· Let's Encrypt SSL è¯ä¹¦
3. âœ… é…ç½®è¯ä¹¦è‡ªåŠ¨ç»­æœŸ
4. âœ… æµ‹è¯•è¯ä¹¦ç»­æœŸåŠŸèƒ½

âœ… **æˆåŠŸæ ‡å¿—**ï¼šçœ‹åˆ° `Congratulations! Your certificate and chain have been saved` æ¶ˆæ¯

---

[![ybi7ft.md.png](https://i.imgs.ovh/2026/01/20/ybi7ft.md.png)](https://imgloc.com/image/ybi7ft)

---

### 6.6 éƒ¨ç½² HTTPS Nginx é…ç½®

è¯ä¹¦ç”³è¯·æˆåŠŸåï¼Œéœ€è¦åˆ‡æ¢åˆ° HTTPS é…ç½®ï¼š

```bash
# åˆ é™¤ HTTP é…ç½®
sudo rm -f /etc/nginx/sites-enabled/ä½ çš„åŸŸå.conf
# ä¾‹å¦‚ï¼šsudo rm -f /etc/nginx/sites-enabled/zhcmqtt.top.conf

# å¤åˆ¶ HTTPS é…ç½®æ–‡ä»¶
sudo cp deploy/nginx/ä½ çš„åŸŸå-https.conf /etc/nginx/sites-available/
# ä¾‹å¦‚ï¼šsudo cp deploy/nginx/zhcmqtt.top-https.conf /etc/nginx/sites-available/

# å¯ç”¨ HTTPS é…ç½®
sudo ln -s /etc/nginx/sites-available/ä½ çš„åŸŸå-https.conf /etc/nginx/sites-enabled/
# ä¾‹å¦‚ï¼šsudo ln -s /etc/nginx/sites-available/zhcmqtt.top-https.conf /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯ Nginx
sudo systemctl restart nginx
```

### 6.7 éªŒè¯ HTTPS è®¿é—®

```bash
# æµ‹è¯• HTTPS è®¿é—®
curl -I https://ä½ çš„åŸŸå
# ä¾‹å¦‚ï¼šcurl -I https://zhcmqtt.top
```

âœ… **é¢„æœŸè¾“å‡º**ï¼š`HTTP/2 200`

æˆ–è€…åœ¨æµè§ˆå™¨ä¸­è®¿é—® `https://ä½ çš„åŸŸå`ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š

- âœ… ç»¿è‰²é”å›¾æ ‡
- âœ… åœ°å€æ æ˜¾ç¤º"å®‰å…¨"æˆ–"è¿æ¥æ˜¯å®‰å…¨çš„"
- âœ… HTTP è‡ªåŠ¨é‡å®šå‘åˆ° HTTPS

### 6.8 è¯ä¹¦è‡ªåŠ¨ç»­æœŸè¯´æ˜

SSL è¯ä¹¦ç”³è¯·è„šæœ¬å·²ç»è‡ªåŠ¨é…ç½®äº†è¯ä¹¦ç»­æœŸä»»åŠ¡ã€‚Let's Encrypt è¯ä¹¦æœ‰æ•ˆæœŸä¸º 90 å¤©ï¼Œç³»ç»Ÿä¼šåœ¨åˆ°æœŸå‰è‡ªåŠ¨ç»­æœŸã€‚

ä½ å¯ä»¥æ‰‹åŠ¨æµ‹è¯•ç»­æœŸåŠŸèƒ½ï¼š

```bash
# æµ‹è¯•è¯ä¹¦ç»­æœŸï¼ˆä¸ä¼šçœŸæ­£ç»­æœŸï¼‰
sudo certbot renew --dry-run
```

âœ… **é¢„æœŸè¾“å‡º**ï¼š`Congratulations, all simulated renewals succeeded`

ğŸ’¡ **å°è´´å£«**ï¼š

- è¯ä¹¦ä¼šåœ¨åˆ°æœŸå‰ 30 å¤©è‡ªåŠ¨ç»­æœŸ
- ç»­æœŸå¤±è´¥ä¼šå‘é€é‚®ä»¶é€šçŸ¥åˆ°ä½ é…ç½®çš„é‚®ç®±
- å¯ä»¥ä½¿ç”¨ `sudo certbot certificates` æŸ¥çœ‹è¯ä¹¦çŠ¶æ€

---

## å…«ã€è®¿é—®ä½ çš„åšå®¢

æ­å–œï¼ä½ çš„åšå®¢å·²ç»éƒ¨ç½²æˆåŠŸäº†ã€‚ç°åœ¨è®©æˆ‘ä»¬äº†è§£å¦‚ä½•è®¿é—®åšå®¢ã€‚

ğŸ’¡ **æç¤º**ï¼šå¦‚æœä½ è¿˜æ²¡æœ‰åŸŸåï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æœåŠ¡å™¨ IP åœ°å€è®¿é—®ã€‚åŸŸåé…ç½®æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥åœ¨ç¬¬ä¸ƒæ­¥ä¸­å®Œæˆã€‚

### 7.1 ä½¿ç”¨ åŸŸå è®¿é—®

#### è®¿å®¢è®¿é—®

è®¿å®¢å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®ä½ çš„åšå®¢ï¼š

```
https://ä½ çš„åŸŸå
```

ä¾‹å¦‚ï¼š`https://zhcmqtt.top`

ğŸ’¡ **è®¿å®¢å¯ä»¥åšä»€ä¹ˆ**ï¼š

- âœ… æµè§ˆæ‰€æœ‰å·²å‘å¸ƒçš„åšå®¢æ–‡ç« 
- âœ… æŸ¥çœ‹æ–‡ç« åˆ†ç±»
- âœ… æœç´¢æ–‡ç« 
- âœ… æŸ¥çœ‹æ–‡æ¡£ï¼ˆå¦‚æœæœ‰ï¼‰
- âŒ æ— æ³•åˆ›å»ºã€ç¼–è¾‘æˆ–åˆ é™¤æ–‡ç« 

#### ç®¡ç†å‘˜è®¿é—®

ä½œä¸ºåšå®¢çš„ç®¡ç†å‘˜ï¼Œä½ éœ€è¦ä½¿ç”¨ **GitHub OAuth ç™»å½•**è¿›è¡Œèº«ä»½éªŒè¯ã€‚

âš ï¸ **é‡è¦æç¤º**ï¼šåœ¨ç¬¬å››æ­¥"é…ç½®ç¯å¢ƒå˜é‡"æ—¶ï¼Œå¦‚æœä½ å·²ç»æŒ‰ç…§æ¨èæ–¹å¼é…ç½®äº† GitHub OAuthï¼Œå¯ä»¥ç›´æ¥ç™»å½•ã€‚å¦‚æœè¿˜æ²¡æœ‰é…ç½®ï¼Œè¯·å…ˆè¿”å›ç¬¬å››æ­¥å®Œæˆ GitHub OAuth é…ç½®ã€‚

ğŸ’¡ **ç®¡ç†å‘˜å¯ä»¥åšä»€ä¹ˆ**ï¼š

- âœ… åˆ›å»ºæ–°æ–‡ç« ï¼ˆåšå®¢æˆ–æ–‡æ¡£ï¼‰https://ä½ çš„åŸŸå/write
- âœ… ç¼–è¾‘å·²æœ‰æ–‡ç«  https://ä½ çš„åŸŸå/admin/articles
- âœ… åˆ é™¤æ–‡ç« 
- âœ… ç®¡ç†åˆ†ç±»
- âœ… ä¿®æ”¹æ–‡ç« å‘å¸ƒçŠ¶æ€ï¼ˆè‰ç¨¿/å·²å‘å¸ƒ/å½’æ¡£ï¼‰
- âœ… ä¸Šä¼ å›¾ç‰‡

âœ… **æˆåŠŸæ ‡å¿—**ï¼š

- è®¿å®¢æ¨¡å¼ï¼šå¯ä»¥æµè§ˆæ–‡ç« ï¼Œä½†æ— æ³•ç¼–è¾‘
- ç®¡ç†å‘˜æ¨¡å¼ï¼šå³ä¸Šè§’æœ‰"å†™æ–‡ç« "æŒ‰é’®ï¼Œå¯ä»¥åˆ›å»ºå’Œç¼–è¾‘æ–‡ç« ,åˆ é™¤æ–‡ç« ,ç®¡ç†åˆ†ç±»,ä¿®æ”¹æ–‡ç« å‘å¸ƒçŠ¶æ€,ä¸Šä¼ å›¾ç‰‡

---

## å¸¸è§é—®é¢˜è§£ç­”

### Q1: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

**å¤‡ä»½æ•°æ®åº“**ï¼š

```bash
# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p /opt/backups

# å¤‡ä»½æ•°æ®åº“
docker exec person_web_mysql mysqldump -uroot -pä½ çš„æ•°æ®åº“å¯†ç  personal_blog > /opt/backups/blog-$(date +%Y%m%d).sql

# å‹ç¼©å¤‡ä»½æ–‡ä»¶
gzip /opt/backups/blog-$(date +%Y%m%d).sql
```

**å¤‡ä»½ä¸Šä¼ çš„æ–‡ä»¶**ï¼š

```bash
# å¤‡ä»½ uploads ç›®å½•
tar -czf /opt/backups/uploads-$(date +%Y%m%d).tar.gz -C /opt/Person_Web uploads/
```

### Q2: å¦‚ä½•æ¢å¤æ•°æ®ï¼Ÿ

**æ¢å¤æ•°æ®åº“**ï¼š

```bash
# è§£å‹å¤‡ä»½æ–‡ä»¶
gunzip /opt/backups/blog-20260119.sql.gz

# æ¢å¤æ•°æ®åº“
docker exec -i person_web_mysql mysql -uroot -pä½ çš„æ•°æ®åº“å¯†ç  personal_blog < /opt/backups/blog-20260119.sql
```

---

## æ—¥å¸¸ç»´æŠ¤æŒ‡å—

### å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨

| æ“ä½œ            | å‘½ä»¤                                               |
| --------------- | -------------------------------------------------- |
| æŸ¥çœ‹å®¹å™¨çŠ¶æ€    | `docker compose ps`                                |
| å¯åŠ¨æ‰€æœ‰æœåŠ¡    | `docker compose up -d`                             |
| åœæ­¢æ‰€æœ‰æœåŠ¡    | `docker compose down`                              |
| é‡å¯åº”ç”¨        | `docker compose restart app`                       |
| é‡å¯æ•°æ®åº“      | `docker compose restart mysql`                     |
| æŸ¥çœ‹åº”ç”¨æ—¥å¿—    | `docker compose logs -f app`                       |
| æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—  | `docker compose logs -f mysql`                     |
| è¿›å…¥åº”ç”¨å®¹å™¨    | `docker exec -it person_web_app sh`                |
| è¿›å…¥æ•°æ®åº“å®¹å™¨  | `docker exec -it person_web_mysql mysql -uroot -p` |
| é‡æ–°éƒ¨ç½²        | `bash deploy/scripts/deploy.sh`                    |
| é‡è½½ Nginx      | `sudo systemctl reload nginx`                      |
| æµ‹è¯• Nginx é…ç½® | `sudo nginx -t`                                    |

### å®šæœŸç»´æŠ¤ä»»åŠ¡

#### æ¯å‘¨ä»»åŠ¡

1. **æ£€æŸ¥å®¹å™¨çŠ¶æ€**

   ```bash
   docker compose ps
   docker stats --no-stream
   ```

2. **æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ**

   ```bash
   df -h
   du -sh /opt/Person_Web/uploads
   ```

3. **å¤‡ä»½æ•°æ®åº“**

   ```bash
   mkdir -p /opt/backups
   docker exec person_web_mysql mysqldump -uroot -pä½ çš„æ•°æ®åº“å¯†ç  personal_blog | gzip > /opt/backups/blog-$(date +%Y%m%d).sql.gz
   ```

#### æ¯æœˆä»»åŠ¡

1. **æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…**

   ```bash
   sudo apt update
   sudo apt upgrade -y
   ```

2. **æ¸…ç† Docker èµ„æº**

   ```bash
   # æ¸…ç†æœªä½¿ç”¨çš„é•œåƒã€å®¹å™¨ã€ç½‘ç»œ
   docker system prune -a
   ```

3. **æ£€æŸ¥ SSL è¯ä¹¦æœ‰æ•ˆæœŸ**

   ```bash
   sudo certbot certificates
   ```

#### æ¯å­£åº¦ä»»åŠ¡

1. **å®Œæ•´å¤‡ä»½**

   ```bash
   # å¤‡ä»½æ•°æ®åº“
   docker exec person_web_mysql mysqldump -uroot -pä½ çš„æ•°æ®åº“å¯†ç  personal_blog | gzip > /opt/backups/full-backup-$(date +%Y%m%d)-db.sql.gz

   # å¤‡ä»½ä¸Šä¼ æ–‡ä»¶
   tar -czf /opt/backups/full-backup-$(date +%Y%m%d)-uploads.tar.gz -C /opt/Person_Web uploads/

   # å¤‡ä»½é…ç½®æ–‡ä»¶
   cp /opt/Person_Web/.env.production /opt/backups/env-backup-$(date +%Y%m%d)
   ```

2. **æ€§èƒ½ä¼˜åŒ–æ£€æŸ¥**

   ```bash
   # æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
   docker stats

   # æŸ¥çœ‹æ•°æ®åº“å¤§å°
   docker exec person_web_mysql mysql -uroot -pä½ çš„æ•°æ®åº“å¯†ç  -e "SELECT table_schema AS 'Database', ROUND(SUM(data_length + index_length) / 1024 / 1024, 2) AS 'Size (MB)' FROM information_schema.tables GROUP BY table_schema;"
   ```

### æ•…éšœæ’æŸ¥æµç¨‹

å½“åšå®¢å‡ºç°é—®é¢˜æ—¶ï¼ŒæŒ‰ç…§ä»¥ä¸‹æµç¨‹æ’æŸ¥ï¼š

1. **æ£€æŸ¥å®¹å™¨çŠ¶æ€**

   ```bash
   docker compose ps
   ```

2. **æŸ¥çœ‹åº”ç”¨æ—¥å¿—**

   ```bash
   docker compose logs --tail=50 app
   ```

3. **æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—**

   ```bash
   docker compose logs --tail=50 mysql
   ```

4. **æ£€æŸ¥ç³»ç»Ÿèµ„æº**

   ```bash
   free -h  # å†…å­˜ä½¿ç”¨
   df -h    # ç£ç›˜ä½¿ç”¨
   ```

5. **é‡å¯æœåŠ¡**

   ```bash
   docker compose restart
   ```

6. **å¦‚æœé—®é¢˜ä¾ç„¶å­˜åœ¨ï¼ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—**

   ```bash
   docker compose logs app > /tmp/app-logs.txt
   docker compose logs mysql > /tmp/mysql-logs.txt
   ```

---

## é™„å½•

### é¡¹ç›®æ–‡ä»¶ç»“æ„

```
Person_Web/
â”œâ”€â”€ client/                 # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ pages/         # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/    # UI ç»„ä»¶
â”‚   â”‚   â””â”€â”€ lib/           # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ server/                # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ _core/            # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ routers.ts        # tRPC è·¯ç”±
â”‚   â”œâ”€â”€ db.ts             # æ•°æ®åº“æ“ä½œ
â”‚   â””â”€â”€ index.ts          # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ drizzle/              # æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ schema.ts         # è¡¨ç»“æ„å®šä¹‰
â”‚   â””â”€â”€ migrations/       # è¿ç§»æ–‡ä»¶
â”œâ”€â”€ deploy/               # éƒ¨ç½²ç›¸å…³
â”‚   â”œâ”€â”€ nginx/           # Nginx é…ç½®
â”‚   â””â”€â”€ scripts/         # éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ uploads/              # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”œâ”€â”€ .env.production       # ç”Ÿäº§ç¯å¢ƒå˜é‡
â”œâ”€â”€ docker-compose.yml    # Docker Compose é…ç½®
â”œâ”€â”€ Dockerfile            # Docker é•œåƒæ„å»º
â””â”€â”€ package.json          # é¡¹ç›®ä¾èµ–
```

### æŠ€æœ¯æ ˆè¯´æ˜

- **å‰ç«¯**: React 19 + TypeScript + Vite
- **åç«¯**: Express + tRPC + TypeScript
- **æ•°æ®åº“**: MySQL 8.0
- **ORM**: Drizzle ORM
- **å®¹å™¨åŒ–**: Docker + Docker Compose
- **Web æœåŠ¡å™¨**: Nginx
- **SSL è¯ä¹¦**: Let's Encrypt (Certbot)

### è·å–å¸®åŠ©

å¦‚æœé‡åˆ°æœ¬æ–‡æ¡£æœªæ¶µç›–çš„é—®é¢˜ï¼š

1. **æŸ¥çœ‹æ—¥å¿—**
   - åº”ç”¨æ—¥å¿—ï¼š`docker compose logs app`
   - æ•°æ®åº“æ—¥å¿—ï¼š`docker compose logs mysql`
   - Nginx æ—¥å¿—ï¼š`/var/log/nginx/error.log`

2. **åœ¨çº¿èµ„æº**
   - Docker å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.docker.com/
   - Nginx å®˜æ–¹æ–‡æ¡£ï¼šhttps://nginx.org/en/docs/
   - MySQL å®˜æ–¹æ–‡æ¡£ï¼šhttps://dev.mysql.com/doc/
